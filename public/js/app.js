
var app=angular.module('myNote',['ngAnimate']);app.controller('NoteController',function($scope,$rootScope,$http){$http.get('/notes').success(function(data){$rootScope.notes=data;}).error(function(data){alert('Error: '+data);});$scope.delete=function(data){$http.delete('/note/'+data).success(function(){$http.get('/notes').success(function(data){$rootScope.notes=data;}).error(function(data){alert('Error: '+data);});}).error(function(data){alert('Error: '+data);});};$scope.send=function(){var note={};note.name=$scope.name;note.body=$scope.body;$http.post('/note',note).success(function(data){$http.get('/notes').success(function(data){$rootScope.notes=data;$scope.toggle();$scope.name='';$scope.body='';}).error(function(data){alert('Error: '+data);});}).error(function(data){alert('Error: '+data);});};});app.directive('toggleElem',function(){return{restrict:'A',controller:function($scope){$scope.visible=true;$scope.toggle=function(){$scope.visible=($scope.visible)?false:true};}};});app.directive('modalWindow',function(){return{restrict:'A',scope:true,controller:function($rootScope,$scope,$http){$rootScope.shows={};$scope.open=function(windowName,updateId){$rootScope.shows[windowName]=true;$rootScope.updateId=updateId;};$scope.close=function(){$rootScope.shows={};};$scope.send=function(){$http.put('/note',{updateId:$scope.updateId,name:$scope.name,body:$scope.body}).success(function(data){$scope.close();$scope.name='';$scope.body='';$http.get('/notes').success(function(data){$rootScope.notes=data;}).error(function(data){alert('Error: '+data);});}).error(function(data){alert('Error: '+data);});};}};});