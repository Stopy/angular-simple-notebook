
var app=angular.module('myNote',['ngAnimate']);app.controller('NoteController',function($scope,$rootScope,$http,noteSrv){noteSrv.getNotes(function(err,data){if(err)return alert('Error: '+data);$rootScope.notes=data;});$scope.delete=function(deleteId){noteSrv.deleteNotes(deleteId,function(err,data){if(err)return alert('Error: '+data);$rootScope.notes=data;});};$scope.send=function(){var note={};note.name=$scope.name;note.body=$scope.body;noteSrv.addNotes(note,function(err,data){if(err)return alert('Error: '+data);$rootScope.notes=data;$scope.toggle();$scope.name='';$scope.body='';});};});app.directive('toggleElem',function(){return{restrict:'A',controller:function($scope){$scope.visible=true;$scope.toggle=function(){$scope.visible=($scope.visible)?false:true};}};});app.directive('modalWindow',function(){return{restrict:'A',scope:true,controller:function($rootScope,$scope,$http,noteSrv){$rootScope.shows={};$scope.open=function(windowName,updateId){$rootScope.shows[windowName]=true;$rootScope.updateId=updateId;};$scope.close=function(){$rootScope.shows={};};$scope.send=function(){noteSrv.updateNotes({updateId:$scope.updateId,name:$scope.name,body:$scope.body},function(err,data){if(err)return alert(err);$scope.close();$scope.name='';$scope.body='';$rootScope.notes=data;});};}};});app.factory('noteSrv',function($http){return{getNotes:function(cb){$http.get('/notes').success(function(data){cb(null,data);}).error(function(data){cb(data);});},addNotes:function(note,cb){var self=this;$http.post('/note',note).success(function(data){self.getNotes(cb);}).error(function(data){cb(data);});},deleteNotes:function(deleteId,cb){var self=this;$http.delete('/note/'+deleteId).success(function(){self.getNotes(cb);}).error(function(data){cb(data);});},updateNotes:function(data,cb){var self=this;$http.put('/note',data).success(function(data){self.getNotes(cb);}).error(function(data){cb(data);});},};});